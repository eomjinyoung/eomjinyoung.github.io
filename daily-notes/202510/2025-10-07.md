# 2025-10-07

## 학습

- "Effective Java 3/E" 강의 자료 만들기
    

### 아이템 18. 상속보다는 컴포지션을 사용하라

- 상속의 문제점 중에서 "self-use" 문제를 이해했다.
  - self-use 문제는 상위 클래스의 메서드가 하위 클래스의 인스턴스를 참조할 때 발생하는 문제이다.
- "self-use" 문제를 해결하는 방법으로 컴포지션을 사용하는 방법을 이해했다.
  - 컴포지션은 객체를 포함하는 방식으로 기능을 확장하는 방법이다.
  - 새 클래스의 메서드를 호출하면 포함된 객체의 메서드를 호출하는 방식으로 동작한다.
  - 이것을 "전달(forwarding)"이라고 한다.
- 컴포지션을 사용하여 기능을 확장하는 방법을 확인했다.
- Properties 사례를 통해 잘못된 상속으로 발생할 수 있는 위험성을 확인했다.
  - Properties 클래스의 상위 클래스인 Hashtable 클래스의 메서드를 호출하면 Properties의 불변식이 깨진다.

### 아이템 19. 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라

- 상속을 고려해 클래스를 설계할 때 지켜야할 원칙을 이해 했다.
- 특히 자기 사용(self-use)을 문서화하지 않았을 경우, 하위 클래스를 잘못 작성하여 발생하는 폐해를 예제를 통해 확인했다.
- 공개된 API의 내부 동작에 개입하는 메서드/필드에 대해 하위 클래스에서 성능을 높일 수 있도록 protected 로 공개하는 상황을 예제를 통해 확인했다.
- 생성자에서 재정의 가능 메서드를 호출할 때 발생하는 문제를 예제를 통해 확인했다.
- 일반 구체 클래스의 상속을 금지해야 하는 이유를 이해하고 금지하는 방법을 확인했다.

## 참고

### Composition, Forwarding, Delegation 

- 컴포지션(composition) 
  - 객체 지향 프로그래밍에서 "has-a" 관계를 나타내는 설계 원칙이다.
  - 클래스가 다른 객체를 필드로 보유하고 그 객체의 기능을 이용하는 방식이다.
  - `private final SomeType impl;`
- 전달(forwarding)
  - 내부 객체의 메서드를 외부에서 호출할 수 있도록 대신 호출하는 방식이다.
  - `void doX() { impl.doX(); }`
- 위임(delegation)
  - 위임은 컴포지션과 전달을 포함하는 더 넓은 개념이다.
  - 엄밀히 말하면, 위임은 내부 객체에 작업을 맡기는 행위를 의미한다.
  - 작업을 맡은 내부 객체는 외부 객체(this)의 참조를 알고, 다시 콜백 형태로 되돌려 호출할 수 있다.
  - `void doX() { impl.doX(this); }`